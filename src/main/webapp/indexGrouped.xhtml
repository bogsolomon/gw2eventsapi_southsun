<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>CoF Open Status Tracker</title>
    </h:head>
    <h:body>
        <h:form id="form"> 
        	<p:tabView id="tabView">
        		<p:tab id="opentab" title="Open Worlds">
        			<p:outputPanel id="openpanel" layout="block"><h:outputText escape="false" value="#{cofEventBean.openServers}"></h:outputText></p:outputPanel>  
        		</p:tab>	  
        		<p:tab id="escorttab" title="Escort Worlds">
        			<p:outputPanel id="escortpanel" layout="block"><h:outputText escape="false" value="#{cofEventBean.escortServers}"></h:outputText></p:outputPanel>  
        		</p:tab>
        		<p:tab id="escortwarmuptab" title="Escort Warmup Worlds">
        			<p:outputPanel id="escortwarmuppanel" layout="block"><h:outputText escape="false" value="#{cofEventBean.escortWarmupServers}"></h:outputText></p:outputPanel>  
        		</p:tab>
        		<p:tab id="pretab" title="Pre Worlds" disabled="true">
        			<p:outputPanel id="prepanel" layout="block"><h:outputText escape="false" value="#{cofEventBean.preServers}"></h:outputText></p:outputPanel>  
        		</p:tab>
        		<p:tab id="inactivetab" title="Inactive Worlds" disabled="true">
        			<p:outputPanel id="inactivepanel" layout="block"><h:outputText escape="false" value="#{cofEventBean.inactiveServers}"></h:outputText></p:outputPanel>  
        		</p:tab>
        	</p:tabView>
        </h:form> 
 
        <p:socket onMessage="handleMessageOpen" channel="/OpenWorlds" />
        <p:socket onMessage="handleMessageEscort" channel="/EscortWorlds" />
        <p:socket onMessage="handleMessageEscortWarmup" channel="/EscortWarmupWorlds" />
        <p:socket onMessage="handleMessagePre" channel="/PreWorlds" />
        <p:socket onMessage="handleMessageInactive" channel="/InactiveWorlds" />
        
        <p:socket onMessage="handleMessageAlert" channel="/Alerts" />
 
        <script type="text/javascript">
                function handleMessageOpen(data) {
                    var content = $(PrimeFaces.escapeClientId('form:tabView:openpanel'));  
                    content.html(data);  
                }
                
                function handleMessageEscort(data) {
                    var content = $(PrimeFaces.escapeClientId('form:tabView:escortpanel'));  
                    content.html(data);  
                }
                
                function handleMessageEscortWarmup(data) {
                    var content = $(PrimeFaces.escapeClientId('form:tabView:escortwarmuppanel'));  
                    content.html(data);  
                }
                
                function handleMessagePre(data) {
                    var content = $(PrimeFaces.escapeClientId('form:tabView:prepanel'));  
                    content.html(data);  
                }
                
                function handleMessageInactive(data) {
                    var content = $(PrimeFaces.escapeClientId('form:tabView:inactivepanel'));  
                    content.html(data);  
                }
                
                function handleMessageAlert(data) {
                    alert(data);
                }
        </script>
    </h:body>
</html>